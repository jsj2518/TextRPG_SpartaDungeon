using System;
using System.Threading;

namespace TextRPG_SpartaDungeon
{
    enum SB //Scene Background
    {
        MainMenu,
        IngameMenu,
        Void,
        Town,
        Battle,
        Status,
        Inventory,
        Shop,
        Max
    }
    class SceneBackground
    {
        SB sceneCurrent;
        public string[] screen;

        public SceneBackground(SB sbNum)
        {
            sceneCurrent = sbNum;

            screen = new string[Const.screenH];

            switch (sbNum)
            {
                case SB.MainMenu:
                    //            0         1         2         3         4         5         6         7         8         9                  
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
                    screen[ 0] = "                                                                                                    ";
                    screen[ 1] = "                                                                                                    ";
                    screen[ 2] = "                                     < < < 스파르타  던전 > > >                                     ";
                    screen[ 3] = "                                                                                                    ";
                    screen[ 4] = "                                                                                                    ";
                    screen[ 5] = "                                 ==================================                                 ";
                    screen[ 6] = "                                |                                  |                                ";
                    screen[ 7] = "                                |                                  |                                ";
                    screen[ 8] = "                                |                                  |                                ";
                    screen[ 9] = "                                 ==================================                                 ";
                    screen[10] = "                                                                                                    ";
                    screen[11] = "                                 ==================================                                 ";
                    screen[12] = "                                |                                  |                                ";
                    screen[13] = "                                |                                  |                                ";
                    screen[14] = "                                |                                  |                                ";
                    screen[15] = "                                 ==================================                                 ";
                    screen[16] = "                                                                                                    ";
                    screen[17] = "                                 ==================================                                 ";
                    screen[18] = "                                |                                  |                                ";
                    screen[19] = "                                |                                  |                                ";
                    screen[20] = "                                |                                  |                                ";
                    screen[21] = "                                 ==================================                                 ";
                    screen[22] = "                                                                                                    ";
                    screen[23] = "                                                                                                    ";
                    screen[24] = "                                                                                                    ";
                    break;
                case SB.IngameMenu:
                    //            0         1         2         3         4         5         6         7         8         9                  
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
                    screen[ 0] = "                                                                                                    ";
                    screen[ 1] = "                                                                                                    ";
                    screen[ 2] = "                                                                                                    ";
                    screen[ 3] = "                                                                                                    ";
                    screen[ 4] = "                                                                                                    ";
                    screen[ 5] = "                                 ==================================                                 ";
                    screen[ 6] = "                                |                                  |                                ";
                    screen[ 7] = "                                |                                  |                                ";
                    screen[ 8] = "                                |                                  |                                ";
                    screen[ 9] = "                                 ==================================                                 ";
                    screen[10] = "                                                                                                    ";
                    screen[11] = "                                 ==================================                                 ";
                    screen[12] = "                                |                                  |                                ";
                    screen[13] = "                                |                                  |                                ";
                    screen[14] = "                                |                                  |                                ";
                    screen[15] = "                                 ==================================                                 ";
                    screen[16] = "                                                                                                    ";
                    screen[17] = "                                 ==================================                                 ";
                    screen[18] = "                                |                                  |                                ";
                    screen[19] = "                                |                                  |                                ";
                    screen[20] = "                                |                                  |                                ";
                    screen[21] = "                                 ==================================                                 ";
                    screen[22] = "                                                                                                    ";
                    screen[23] = "                                                                                                    ";
                    screen[24] = "                                                                                                    ";
                    break;
                case SB.Void:
                    //            0         1         2         3         4         5         6         7         8         9                  
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
                    screen[ 0] = "                                                                                                    ";
                    screen[ 1] = "                                                                                                    ";
                    screen[ 2] = "                                                                                                    ";
                    screen[ 3] = "                                                                                                    ";
                    screen[ 4] = "                                                                                                    ";
                    screen[ 5] = "                                                                                                    ";
                    screen[ 6] = "                                                                                                    ";
                    screen[ 7] = "                                                                                                    ";
                    screen[ 8] = "                                                                                                    ";
                    screen[ 9] = "                                                                                                    ";
                    screen[10] = "                                                                                                    ";
                    screen[11] = "                                                                                                    ";
                    screen[12] = "                                                                                                    ";
                    screen[13] = "                                                                                                    ";
                    screen[14] = "                                                                                                    ";
                    screen[15] = "                                                                                                    ";
                    screen[16] = "                                                                                                    ";
                    screen[17] = "                                                                                                    ";
                    screen[18] = "                                                                                                    ";
                    screen[19] = "                                                                                                    ";
                    screen[20] = "                                                                                                    ";
                    screen[21] = "                                                                                                    ";
                    screen[22] = "                                                                                                    ";
                    screen[23] = "                                                                                                    ";
                    screen[24] = "                                                                                                    ";
                    break;
                case SB.Town:
                    //            0         1         2         3         4         5         6         7         8         9                  
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
                    screen[ 0] = "                                                                        ||                          ";
                    screen[ 1] = "                                                                        ||                          ";
                    screen[ 2] = "                                                                        ||                          ";
                    screen[ 3] = "          ( )         ___                   ___              /#         ||                          ";
                    screen[ 4] = "         ( (       ._/   #               ._/   #            /  #        ||                          ";
                    screen[ 5] = "          ()       |/     #              |/     #          /_  _#       ||                          ";
                    screen[ 6] = "       /# )        /   ㅁ  #             /  ㅁ   #          |  |        ||                          ";
                    screen[ 7] = "      /  #^       /_________#           /_________#         |  |________||                          ";
                    screen[ 8] = " ^*^ /    #       | []   [] |-----------|   |   | | *Y*^   / / / / / / /||                          ";
                    screen[ 9] = "*Y**/______# _____|         |   _____   |   | $ | |^**Y*^  | X X  ____  ||                          ";
                    screen[10] = " ^Y |    _ |//////|=========|  |     |  |===|___|=| ^Y^    | X X |UUUU| ||                          ";
                    screen[11] = "  | | []| ||__oo__| ,--,    |  |    o|  | ,--,    |  |     | X X |    | ||                          ";
                    screen[12] = "__|_|___|_||__===_|_|__|____|  |   /||  |_|__|____|__| o __|_X_X |____|_||                          ";
                    screen[13] = "                      o   .o       /|                 <|>               ||                          ";
                    screen[14] = ",mmmmm.  _&_/^>      !|-  ||;                o         A                ||                          ";
                    screen[15] = "|_____/==h^h/        ||   /|                /Z                   <uxm.  ||           (1 ~ 7 선택)   ";
                    screen[16] = " ^   ^   ^ ^'                               / >                   ^ ^   ||                          ";
                    screen[17] = "====================================================================================================";
                    screen[18] = "                                                                                                    ";
                    screen[19] = "                                                                                                    ";
                    screen[20] = "                                                                                                    ";
                    screen[21] = "                                                                                                    ";
                    screen[22] = "                                                                                                    ";
                    screen[23] = "                                                                                                    ";
                    screen[24] = "                                                                                                    ";
                    break;
                case SB.Battle:
                    //            0         1         2         3         4         5         6         7         8         9                  
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
                    screen[ 0] = "                                                                                                    ";//"                                                                                                    ";
                    screen[ 1] = "                                                                                                    ";//"                                                                                                    ";
                    screen[ 2] = "                                                                                                    ";//"                나레이션                                                                            ";
                    screen[ 3] = "                                                                                                    ";//"                                                                                                    ";
                    screen[ 4] = "                                                                                                    ";//"                                                                                                    ";
                    screen[ 5] = "                                                                                                    ";//"                                                                                                    ";
                    screen[ 6] = "====================================================================================================";//"====================================================================================================";
                    screen[ 7] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[ 8] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[ 9] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[10] = "                                ||                                    ||                            ";//"                                ||         ㅁ                         ||                            ";
                    screen[11] = "                                ||                                    ||                            ";//" ☆  LV00  12345678901234  도적 ||                                    || § LV00  123456789  AP000% ";
                    screen[12] = "                                ||                                    ||                            ";//" HP 000/000  SP 000/000  AP000% ||     ㅁ  ㅁ  ㅁ  ㅁ  ㅁ  ㅁ  ㅁ     || HP 0000/0000  SP 0000/0000 ";
                    screen[13] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[14] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[15] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[16] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[17] = "                                ||                                    ||                            ";//"                                ||                                    ||                            ";
                    screen[18] = "====================================================================================================";//"====================================================================================================";
                    screen[19] = "                                                                                                    ";//"                                                                                                    ";
                    screen[20] = "                                                                                                    ";//"                선택지                                                                              ";
                    screen[21] = "                                                                                                    ";//"                                                                                                    ";
                    screen[22] = "                                                                                                    ";//"                                                                                                    ";
                    screen[23] = "                                                                                                    ";//"                                                                                                    ";
                    screen[24] = "                                                                                                    ";//"                                                                                                    ";
                    break;
                case SB.Status:
                    //            0         1         2         3         4         5         6         7         8         9              0         1         2         3         4         5         6         7         8         9             
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789     0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
                    screen[ 0] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[ 1] = "        LV                                  경험치 :                ||                              ";//"        LV 00   12345678901234   도적       경험치 : 00000 / 00000  ||                              "
                    screen[ 2] = "                                            소지금 :                ||     확장 스텟                ";//"                                            소지금 : 0000000        ||     확장 스텟                "
                    screen[ 3] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[ 4] = "        추가 메뉴                 기본 스텟                         ||     /HP        :             ";//"        추가 메뉴                 기본 스텟 (스텟 포인트 : 00)      ||     /HP        : 000 / 000   "
                    screen[ 5] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[ 6] = "        /인벤토리                 /건강  :                          ||     /SP        :             ";//"        /인벤토리                 /건강  : 000                      ||     /SP        : 000         "
                    screen[ 7] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[ 8] = "        /장비                     /체력  :                          ||     /공격력    :             ";//"        /장비 (무게 : 000)        /체력  : 000                      ||     /공격력    : 000         "
                    screen[ 9] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[10] = "        /스킬                     /힘    :                          ||     /방어력    :             ";//"        /스킬                     /힘    : 000                      ||     /방어력    : 000         "
                    screen[11] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[12] = "                                  /민첩  :                          ||     /스피드    :             ";//"        /용병1                    /민첩  : 000                      ||     /스피드    : 000         "
                    screen[13] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[14] = "                                  /손재주:                          ||     /근접명중  :             ";//"        /용병2                    /손재주: 000                      ||     /근접명중  : 000         "
                    screen[15] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[16] = "                                                                    ||     /원거리명중:             ";//"                                                                    ||     /원거리명중: 000         "
                    screen[17] = "====================================================================||                              ";//"====================================================================||                              "
                    screen[18] = "                                                                    ||     /회피      :             ";//"                                                                    ||     /회피      : 000         "
                    screen[19] = "                                                                    ||                              ";//"     설명란                                                         ||                              "
                    screen[20] = "                                                                    ||     /크리티컬  :             ";//"                                                                    ||     /크리티컬  : 000%         "
                    screen[21] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[22] = "                                                                    ||     /방어확률  :             ";//"                                                                    ||     /방어확률  : 000%         "
                    screen[23] = "                                                                    ||                              ";//"                                                                    ||                              "
                    screen[24] = "                                                                    ||                              ";//"                                                                    ||                              "
                    break;
                case SB.Inventory:
                    //            0         1         2         3         4         5         6         7         8         9             0         1         2         3         4         5         6         7         8         9                  
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789    0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
                    screen[ 0] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[ 1] = "                                        (tab키)  ||                                                 ";//    인벤토리      <장비>      스킬      (tab키)  ||    무기 :                                       ";
                    screen[ 2] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[ 3] = "-------------------------------------------------||                                                 ";//-------------------------------------------------||    보조 :                                       ";
                    screen[ 4] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[ 5] = "                                                 ||                                                 ";// --> [E]                                         ||    투구 :                                       ";
                    screen[ 6] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[ 7] = "                                                 ||                                                 ";//                                                 ||    갑옷 :                                       ";
                    screen[ 8] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[ 9] = "                                                 ||                                                 ";//                                                 ||    장갑 :                                       ";
                    screen[10] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[11] = "                                                 ||                                                 ";//                                                 ||    신발 :                                       ";
                    screen[12] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[13] = "                                                 ||                                                 ";//                                                 ||    반지 :                                       ";
                    screen[14] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[15] = "                                                 ||                                                 ";//                                                 ||    무게 총합 :                                  ";
                    screen[16] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[17] = "                                                 ||                                                 ";//                                                 ||=================================================";
                    screen[18] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    screen[19] = "                                                 ||                                                 ";//                                                 ||    HP    :             근접명중  :              ";
                    screen[20] = "                                                 ||                                                 ";//                                                 ||    SP    :             원거리명중:              ";
                    screen[21] = "                                                 ||                                                 ";//                                                 ||    공격력:             회피      :              ";
                    screen[22] = "                                                 ||                                                 ";//                                                 ||    방어력:             크리티컬  :              ";
                    screen[23] = "                                                 ||                                                 ";//                                                 ||    스피드:             방어확률  : 000%         ";
                    screen[24] = "                                                 ||                                                 ";//                                                 ||                                                 ";
                    break;
                case SB.Shop:
                    //            0         1         2         3         4         5         6         7         8         9           // 0         1         2         3         4         5         6         7         8         9                 
                    //            0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789  // 0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789 
                    screen[ 0] = "                                                                                                    ";//"                                                                                                    "
                    screen[ 1] = "                               (tab키)                                        소지금 :        G     ";//"        <구매>      판매       (tab키)                                                              "
                    screen[ 2] = "                                                                                                    ";//"                                                                                                    "
                    screen[ 3] = "----------------------------------------------------------------------------------------------------";//"----------------------------------------------------------------------------------------------------"
                    screen[ 4] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[ 5] = "                                                 ||                                                 ";//"     장갑 : 빛나는 가죽장갑          05000 G     || --> >> 산다 <<                                  "
                    screen[ 6] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[ 7] = "                                                 ||                                                 ";//"                                                 ||     설명                                        "
                    screen[ 8] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[ 9] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[10] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[11] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[12] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[13] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[14] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[15] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[16] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[17] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[18] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[19] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[20] = "                                                 ||                                                 ";//"                                                 ||                                                 "
                    screen[21] = "====================================================================================================";//"===================================================================================================="
                    screen[22] = "                                                                                                    ";//"                                                                                                    "
                    screen[23] = "                                                                                                    ";//"     장비상인 : 우리는 싼것이든 비싼 것이든 다 최상품만 취급하지!                                   "
                    screen[24] = "                                                                                                    ";//"                                                                                                    "
                    break;
            }
        }
    }


    enum SE //Scene Event
    {
        MainMenu_Default,
        MainMenu_Load,
        IngameMenu_Default,
        Void_Opening,
        Town_Default,
        Status_Default,
        Inventory_Inventory,
        Inventory_Gear,
        Inventory_Skill,
        Shop_GearShop,
        Shop_PotionShop,
        Shop_Mercenary,
        Max
    }
    class SceneEvent
    {
        SE sceneCurrent;

        public SceneEvent(SE seNum)
        {
            sceneCurrent = seNum;
        }

        //이벤트 씬 구동
        public bool Execute(out SB SB_Next, out SE SE_Next, ScreenController screenController, KeyController keyController)
        {
            if (GameData.ExistsData(1)) Program.gameData1 = GameData.LoadData(1);
            if (GameData.ExistsData(2)) Program.gameData2 = GameData.LoadData(2);
            if (GameData.ExistsData(3)) Program.gameData3 = GameData.LoadData(3);

            SB_Next = SB.MainMenu;
            SE_Next = SE.MainMenu_Default;

            int selectIdx;
            int cheatActivate;
            int i, intVal, tab;
            string strInput;
            string[] conversationPreset;
            bool boolVal;

            ConsoleKey[] keyFilter;
            ConsoleKey keyInput;

            switch (sceneCurrent)
            {
                //메인메뉴
                case SE.MainMenu_Default:
                    #region
                    screenController.Write(7, 33, 34, "             새 게임              ");
                    screenController.Write(13, 33, 34, "             불러오기             ");
                    screenController.Write(19, 33, 34, "             게임종료             ");
                    screenController.Write(23, 76, 8, "Z : 확인");
                    selectIdx = 0;
                    keyFilter = new ConsoleKey[] { ConsoleKey.UpArrow, ConsoleKey.DownArrow, ConsoleKey.Z };

                    while (true) //메뉴 선택
                    {
                        keyInput = keyController.GetUserInput(keyFilter, out cheatActivate);
                        switch (keyInput)
                        {
                            case ConsoleKey.UpArrow:
                                selectIdx = (selectIdx == 0) ? 0 : selectIdx - 1;
                                break;
                            case ConsoleKey.DownArrow:
                                selectIdx = (selectIdx == 2) ? 2 : selectIdx + 1;
                                break;
                            case ConsoleKey.Z:
                                switch (selectIdx)
                                {
                                    case 0: //새 게임
                                        SB_Next = SB.Void;
                                        SE_Next = SE.Void_Opening;
                                        return true;
                                    case 1: //불러오기
                                        SB_Next = SB.MainMenu;
                                        SE_Next = SE.MainMenu_Load;
                                        return true;
                                    case 2: //게임 종료
                                        SB_Next = SB.MainMenu;
                                        SE_Next = SE.MainMenu_Default;
                                        return false;
                                }
                                break;
                        }
                        switch (selectIdx)
                        {
                            case 0:
                                screenController.Write(7, 28, 3, "-->");
                                screenController.Write(13, 28, 3, "   ");
                                screenController.Write(19, 28, 3, "   ");
                                break;
                            case 1:
                                screenController.Write(7, 28, 3, "   ");
                                screenController.Write(13, 28, 3, "-->");
                                screenController.Write(19, 28, 3, "   ");
                                break;
                            case 2:
                                screenController.Write(7, 28, 3, "   ");
                                screenController.Write(13, 28, 3, "   ");
                                screenController.Write(19, 28, 3, "-->");
                                break;
                        }
                        screenController.Update();
                    }
                    #endregion
                //저장파일 불러오기
                case SE.MainMenu_Load:
                    #region
                    if (Program.gameData1 != null)
                    {
                        screenController.Write(7, 33, 34, string.Format("  LV {0,2}   {1,-14}   {2}   ", Program.gameData1.PP_Level, Program.gameData1.PP_Name, Program.gameData1.PP_ClassKor));
                    }
                    else
                    {
                        screenController.Write(7, 33, 34, "           데이터 없음            ");
                    }
                    if (Program.gameData2 != null)
                    {
                        screenController.Write(13, 33, 34, string.Format("  LV {0,2}   {1,-14}   {2}   ", Program.gameData2.PP_Level, Program.gameData2.PP_Name, Program.gameData2.PP_ClassKor));
                    }
                    else
                    {
                        screenController.Write(13, 33, 34, "           데이터 없음            ");
                    }
                    if (Program.gameData3 != null)
                    {
                        screenController.Write(19, 33, 34, string.Format("  LV {0,2}   {1,-14}   {2}   ", Program.gameData3.PP_Level, Program.gameData3.PP_Name, Program.gameData3.PP_ClassKor));
                    }
                    else
                    {
                        screenController.Write(19, 33, 34, "           데이터 없음            ");
                    }
                    screenController.Write(23, 76, 19, "Z : 확인   X : 뒤로");

                    selectIdx = 0;
                    keyFilter =  new ConsoleKey[] { ConsoleKey.UpArrow, ConsoleKey.DownArrow, ConsoleKey.Z, ConsoleKey.X };

                    while (true) //메뉴 선택
                    {
                        keyInput = keyController.GetUserInput(keyFilter, out cheatActivate);
                        switch (keyInput)
                        {
                            case ConsoleKey.UpArrow:
                                selectIdx = (selectIdx == 0) ? 0 : selectIdx - 1;
                                break;
                            case ConsoleKey.DownArrow:
                                selectIdx = (selectIdx == 2) ? 2 : selectIdx + 1;
                                break;
                            case ConsoleKey.Z:
                                switch (selectIdx)
                                {
                                    case 0:
                                        if (Program.gameData1 != null)
                                        {
                                            Program.gameData = Program.gameData1;
                                            //여기 로드 게임(마을에서 시작)
                                            return true;
                                        }
                                        continue;
                                    case 1:
                                        if (Program.gameData2 != null)
                                        {
                                            Program.gameData = Program.gameData2;
                                            //여기 로드 게임(마을에서 시작)
                                            return true;
                                        }
                                        continue;
                                    case 2:
                                        if (Program.gameData3 != null)
                                        {
                                            Program.gameData = Program.gameData3;
                                            //여기 로드 게임(마을에서 시작)
                                            return true;
                                        }
                                        continue;
                                }
                                break;
                            case ConsoleKey.X:
                                SB_Next = SB.MainMenu;
                                SE_Next = SE.MainMenu_Default;
                                return true;
                        }
                        switch (selectIdx)
                        {
                            case 0:
                                screenController.Write(7, 28, 3, "-->");
                                screenController.Write(13, 28, 3, "   ");
                                screenController.Write(19, 28, 3, "   ");
                                break;
                            case 1:
                                screenController.Write(7, 28, 3, "   ");
                                screenController.Write(13, 28, 3, "-->");
                                screenController.Write(19, 28, 3, "   ");
                                break;
                            case 2:
                                screenController.Write(7, 28, 3, "   ");
                                screenController.Write(13, 28, 3, "   ");
                                screenController.Write(19, 28, 3, "-->");
                                break;
                        }
                        screenController.Update();
                    }
                    #endregion

                //오프닝 (캐릭 스텟 작업 남음)
                case SE.Void_Opening:
                    #region
                    Program.gameData = new GameData();
                    Program.gameData.PP_Level = 1;
                    Program.gameData.PP_Exp = 0;
                    //여기 데이터 초기화

                    screenController.Update();
                    Thread.Sleep(700);
                    screenController.Write(12, 46, 1, ".");
                    screenController.Update();
                    Thread.Sleep(700);
                    screenController.Write(12, 46, 4, ".  .");
                    screenController.Update();
                    Thread.Sleep(700);
                    screenController.Write(12, 46, 7, ".  .  .");
                    screenController.Update();
                    Thread.Sleep(800);
                    conversationPreset = new string[4];
                    conversationPreset[0] = "??? : Hey, you. You're finally awake.";
                    conversationPreset[1] = "??? : 마차에 타자마자 곯아떨어지다니, 어지간히도 피곤했나보군.";
                    conversationPreset[2] = "??? : 마침 마을에 곧 도착하는 참이라 깨워주려고 했는데.";
                    conversationPreset[3] = "랄로프 : 내 이름은 랄로프라고 하는데, 자네 이름은 뭔가?";
                    ScenePreset.VoidConversation(conversationPreset, screenController, keyController);

                    while (true)
                    {
                        //이름 적는 동안 안드로메다 갔다옴
                        Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 100);
                        Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 50);
                        Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 60);
                        Console.Write("이름을 입력해 주세요 (최대 14글자까지 가능하며, 한글은 2글자로 취급합니다)");
                        Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 62);
                        Console.CursorVisible = true;
                        strInput = Console.ReadLine();
                        Console.CursorVisible = false;
                        strInput = strInput.Trim();
                        intVal = 0;
                        for (i = 0; i < strInput.Length; i++)
                        {
                            if ((int)strInput[i] > 128)
                            {
                                intVal += 2;
                            }
                            else
                            {
                                intVal += 1;
                            }
                        }
                        if (intVal > 14)
                        {
                            Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 64);
                            Console.Write("14 글자가 넘습니다!");
                            Thread.Sleep(1000);
                            ConsoleData.countReadLine++;
                        }
                        else if (intVal == 0)
                        {
                            Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 64);
                            Console.Write("이름을 공백으로 설정할 수 없습니다!");
                            Thread.Sleep(1000);
                            ConsoleData.countReadLine++;
                        }
                        else
                        {
                            ConsoleData.countReadLine++;
                            Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 100);
                            Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 50);
                            Console.SetCursorPosition(10, ConsoleData.countReadLine * 50 + 62);
                            Console.Write($"\"{strInput}\"으로 정하시겠습니까?");
                            Console.SetCursorPosition(76, ConsoleData.countReadLine * 50 + 72);
                            Console.Write("Z : 예   X : 아니오");
                            Console.SetCursorPosition(53, ConsoleData.countReadLine * 50 + 74);
                            Console.Write("(한글로 입력하셨으면 한영키를 눌러주세요!)");
                            while (true)
                            {
                                keyFilter = new ConsoleKey[] { ConsoleKey.Z, ConsoleKey.X };
                                keyInput = keyController.GetUserInput(keyFilter, out cheatActivate);
                                if (keyInput == ConsoleKey.Z || keyInput == ConsoleKey.X) break;
                            }
                            if (keyInput == ConsoleKey.Z) //이름 확정
                            {
                                Console.SetCursorPosition(0, 0);
                                break;
                            }
                            else
                            {
                                ConsoleData.countReadLine++;
                            }
                        }
                    }
                    Program.gameData.PP_Name = strInput;

                    if (Program.gameData.PP_Name == "랄로프")
                    {
                        conversationPreset = new string[5];
                        conversationPreset[0] = "랄로프 : 나와 이름이 같다니 이런 우연이 다있나.";
                        conversationPreset[1] = "랄로프 : 설마 날 놀리는건 아니겠지?";
                        conversationPreset[2] = "랄로프 : 흠, 뭐 어쨌든. 만나서 반갑네.";
                        conversationPreset[3] = "랄로프 : 행색을 보아하니 멀리서 온 것 같은데,";
                        conversationPreset[4] = "랄로프 : 자네 등에 있는 건?";
                    }
                    else
                    {
                        conversationPreset = new string[3];
                        conversationPreset[0] = $"랄로프 : {Program.gameData.PP_Name} 라고 하는가. 만나서 반갑네.";
                        conversationPreset[1] = "랄로프 : 행색을 보아하니 멀리서 온 것 같은데,";
                        conversationPreset[2] = "랄로프 : 자네 등에 있는 건?";
                    }
                    ScenePreset.VoidConversation(conversationPreset, screenController, keyController);
                    screenController.ClearLine(12);

                    selectIdx = 0;
                    screenController.Write(10, 30, 20, "검과 방패다.");
                    screenController.Write(12, 30, 20, "단도다.");
                    screenController.Write(14, 30, 20, "활이다.");
                    keyFilter = new ConsoleKey[] { ConsoleKey.UpArrow, ConsoleKey.DownArrow, ConsoleKey.Z };
                    boolVal = true;
                    while (boolVal) //메뉴 선택
                    {
                        keyInput = keyController.GetUserInput(keyFilter, out cheatActivate);
                        switch (keyInput)
                        {
                            case ConsoleKey.UpArrow:
                                selectIdx = (selectIdx == 0) ? 0 : selectIdx - 1;
                                break;
                            case ConsoleKey.DownArrow:
                                selectIdx = (selectIdx == 2) ? 2 : selectIdx + 1;
                                break;
                            case ConsoleKey.Z:
                                boolVal = false;
                                switch (selectIdx)
                                {
                                    case 0:
                                        Program.gameData.PP_Class = PC.Warrior;
                                        Program.gameData.PP_ClassKor = "전사";
                                        break;
                                    case 1:
                                        Program.gameData.PP_Class = PC.Rogue;
                                        Program.gameData.PP_ClassKor = "도적";
                                        break;
                                    case 2:
                                        Program.gameData.PP_Class = PC.Archer;
                                        Program.gameData.PP_ClassKor = "궁수";
                                        break;
                                }

                                //캐릭터 초기화
                                Program.gameData.SetLevel1();
                                Program.gameData.SetInitialEquipment();
                                Program.gameData.ApplyPS();
                                Program.gameData.PP_Gold = 0;
                                Program.gameData.gearShop.ResetList(); //여기 마을 첫 입장 이벤트 씬 만들면 거기로 이동할것
                                break;
                        }
                        switch (selectIdx)
                        {
                            case 0:
                                screenController.Write(10, 25, 3, "-->");
                                screenController.Write(12, 25, 3, "   ");
                                screenController.Write(14, 25, 3, "   ");
                                break;                     
                            case 1:                        
                                screenController.Write(10, 25, 3, "   ");
                                screenController.Write(12, 25, 3, "-->");
                                screenController.Write(14, 25, 3, "   ");
                                break;                     
                            case 2:                        
                                screenController.Write(10, 25, 3, "   ");
                                screenController.Write(12, 25, 3, "   ");
                                screenController.Write(14, 25, 3, "-->");
                                break;
                        }
                        screenController.Update();
                    }
                    screenController.ClearAll();
                    screenController.Update();

                    conversationPreset = new string[5];
                    if (Program.gameData.PP_Class == PC.Warrior)
                    {
                        conversationPreset[0] = "랄로프 : 검과 방패라, 전사로군.";
                        conversationPreset[1] = "랄로프 : 정규군은 아닐 테니, 필시 스파르타 던전에 도전하려고 온 거겠지.";
                        conversationPreset[2] = "랄로프 : 나는 이래뵈도 영주님 직속 전령이니, 곤란한 일 있으면 찾아 오게나. 하하";
                    }
                    else if (Program.gameData.PP_Class == PC.Rogue)
                    {
                        conversationPreset[0] = "랄로프 : 단도라니, 그것도 두 자루나. 그래 자네 도적이로군.";
                        conversationPreset[1] = "랄로프 : 아직도 스파르타 던전의 보물에 대한 소문이 남아 있는건가?";
                        conversationPreset[2] = "랄로프 : 나는 이래뵈도 던전에 대한 정보를 많이 알고 있어. 충분히 지불한다면 알려주지.";
                    }
                    else if (Program.gameData.PP_Class == PC.Archer)
                    {
                        conversationPreset[0] = "랄로프 : 활이라... 나도 왕년에 모험가였을 때는 자네와 같은 궁수였다네.";
                        conversationPreset[1] = "랄로프 : 이 근처의 스파르타 던전에 도전했었지.";
                        conversationPreset[2] = "랄로프 : 무릎에 화살을 맞은 뒤로는 영주님 심부름이나 하고 있지만...";
                    }
                    conversationPreset[3] = "랄로프 : 뭐 어쨌든. 이곳에 온 걸 환영하네.";
                    conversationPreset[4] = "랄로프 : 건투를 빌도록 하지!";
                    ScenePreset.VoidConversation(conversationPreset, screenController, keyController);

                    screenController.ClearLine(12);
                    screenController.ClearLine(23);
                    screenController.Update();
                    Thread.Sleep(700);
                    screenController.Write(12, 46, 1, ".");
                    screenController.Update();
                    Thread.Sleep(700);
                    screenController.Write(12, 46, 4, ".  .");
                    screenController.Update();
                    Thread.Sleep(700);
                    screenController.Write(12, 46, 7, ".  .  .");
                    screenController.Update();
                    Thread.Sleep(800);

                    SB_Next = SB.Town;
                    SE_Next = SE.Town_Default;
                    return true;
                #endregion

                case SE.IngameMenu_Default:
                    #region
                    tab = 0; //0-메뉴화면  1-저장화면  2-불러오기 화면
                    screenController.Write(23, 76, 19, "Z : 확인   X : 뒤로");
                    selectIdx = 0;

                    keyFilter = new ConsoleKey[] { ConsoleKey.NoName };
                    keyController.GetUserInput(keyFilter, out cheatActivate);

                    keyFilter = new ConsoleKey[] { ConsoleKey.UpArrow, ConsoleKey.DownArrow, ConsoleKey.Z, ConsoleKey.X };
                    while (true) //메뉴 선택
                    {
                        screenController.WriteLine(2, "");
                        screenController.Write(7, 33, 34, "");
                        screenController.Write(13, 33, 34, "");
                        screenController.Write(19, 33, 34, "");

                        if (tab == 0)
                        {
                            screenController.Write(2, 42, 16, "< <  메  뉴  > >");
                            screenController.Write(7, 33, 34, "             저장하기              ");
                            screenController.Write(13, 33, 34, "             불러오기             ");
                            screenController.Write(19, 33, 34, "             메인메뉴             ");

                            boolVal = true;
                            while (boolVal)
                            {
                                keyInput = keyController.GetUserInput(keyFilter, out cheatActivate);
                                switch (keyInput)
                                {
                                    case ConsoleKey.UpArrow:
                                        selectIdx = (selectIdx == 0) ? 0 : selectIdx - 1;
                                        break;
                                    case ConsoleKey.DownArrow:
                                        selectIdx = (selectIdx == 2) ? 2 : selectIdx + 1;
                                        break;
                                    case ConsoleKey.Z:
                                        switch (selectIdx)
                                        {
                                            case 0: //저장하기
                                                tab = 1;
                                                boolVal = false;
                                                break;
                                            case 1: //불러오기
                                                tab = 2;
                                                boolVal = false;
                                                return true;
                                            case 2: //메인메뉴
                                                SB_Next = SB.MainMenu;
                                                SE_Next = SE.MainMenu_Default;
                                                return true;
                                        }
                                        break;
                                    case ConsoleKey.X:
                                        selectIdx = (selectIdx == 2) ? 2 : selectIdx + 1;
                                        break;
                                }
                                switch (selectIdx)
                                {
                                    case 0:
                                        screenController.Write(7, 28, 3, "-->");
                                        screenController.Write(13, 28, 3, "   ");
                                        screenController.Write(19, 28, 3, "   ");
                                        break;
                                    case 1:
                                        screenController.Write(7, 28, 3, "   ");
                                        screenController.Write(13, 28, 3, "-->");
                                        screenController.Write(19, 28, 3, "   ");
                                        break;
                                    case 2:
                                        screenController.Write(7, 28, 3, "   ");
                                        screenController.Write(13, 28, 3, "   ");
                                        screenController.Write(19, 28, 3, "-->");
                                        break;
                                }

                                screenController.Update();
                            }
                        }
                        else if (tab == 1)
                        {
                            screenController.Write(2, 41, 18, "< <  저장하기  > >");
                            if (Program.gameData1 != null)
                            {
                                screenController.Write(7, 33, 34, string.Format("  LV {0,2}   {1,-14}   {2}   ", Program.gameData1.PP_Level, Program.gameData1.PP_Name, Program.gameData1.PP_ClassKor));
                            }
                            else
                            {
                                screenController.Write(7, 33, 34, "           데이터 없음            ");
                            }
                            if (Program.gameData2 != null)
                            {
                                screenController.Write(13, 33, 34, string.Format("  LV {0,2}   {1,-14}   {2}   ", Program.gameData2.PP_Level, Program.gameData2.PP_Name, Program.gameData2.PP_ClassKor));
                            }
                            else
                            {
                                screenController.Write(13, 33, 34, "           데이터 없음            ");
                            }
                            if (Program.gameData3 != null)
                            {
                                screenController.Write(19, 33, 34, string.Format("  LV {0,2}   {1,-14}   {2}   ", Program.gameData3.PP_Level, Program.gameData3.PP_Name, Program.gameData3.PP_ClassKor));
                            }
                            else
                            {
                                screenController.Write(19, 33, 34, "           데이터 없음            ");
                            }

                            boolVal = true;
                            while (boolVal)
                            {
                                keyInput = keyController.GetUserInput(keyFilter, out cheatActivate);
                                switch (keyInput)
                                {
                                    case ConsoleKey.UpArrow:
                                        selectIdx = (selectIdx == 0) ? 0 : selectIdx - 1;
                                        break;
                                    case ConsoleKey.DownArrow:
                                        selectIdx = (selectIdx == 2) ? 2 : selectIdx + 1;
                                        break;
                                    case ConsoleKey.Z:
                                        switch (selectIdx)
                                        {
                                            case 0: //저장하기
                                                tab = 1;
                                                boolVal = false;
                                                break;
                                            case 1: //불러오기
                                                tab = 2;
                                                boolVal = false;
                                                return true;
                                            case 2: //메인메뉴
                                                SB_Next = SB.MainMenu;
                                                SE_Next = SE.MainMenu_Default;
                                                return true;
                                        }
                                        break;
                                }
                                switch (selectIdx)
                                {
                                    case 0:
                                        screenController.Write(7, 28, 3, "-->");
                                        screenController.Write(13, 28, 3, "   ");
                                        screenController.Write(19, 28, 3, "   ");
                                        break;
                                    case 1:
                                        screenController.Write(7, 28, 3, "   ");
                                        screenController.Write(13, 28, 3, "-->");
                                        screenController.Write(19, 28, 3, "   ");
                                        break;
                                    case 2:
                                        screenController.Write(7, 28, 3, "   ");
                                        screenController.Write(13, 28, 3, "   ");
                                        screenController.Write(19, 28, 3, "-->");
                                        break;
                                }

                                screenController.Update();
                            }
                        }
                    }
                #endregion

                //마을
                case SE.Town_Default:
                    #region
                    TM townMenuSelect = ScenePreset.TownDefault(Program.gameData, screenController, keyController);
                    switch (townMenuSelect)
                    {
                        case TM.Status:
                            SB_Next = SB.Status;
                            SE_Next = SE.Status_Default;
                            return true;
                        case TM.Dungen:
                            //여기 구현
                            break;
                        case TM.GearShop:
                            SB_Next = SB.Shop;
                            SE_Next = SE.Shop_GearShop;
                            return true;
                        case TM.PotionShop:
                            SB_Next = SB.Shop;
                            SE_Next = SE.Shop_PotionShop;
                            break;
                        case TM.Mercenary:
                            SB_Next = SB.Shop;
                            SE_Next = SE.Shop_Mercenary;
                            break;
                        case TM.Mansion:
                            //여기 구현
                            break;
                        case TM.Menu:
                            //여기 구현
                            break;
                    }
                    break;
                    #endregion

                //스테이터스 창
                case SE.Status_Default:
                    #region
                    ScenePreset.StatusMenu(Program.gameData, screenController, keyController, ref SB_Next, ref SE_Next);
                    break;
                    #endregion
                //인벤토리,장비,스킬창
                case SE.Inventory_Inventory:
                    #region
                    ScenePreset.InventoryMenu(0, Program.gameData, screenController, keyController, ref SB_Next, ref SE_Next);
                    break;
                    #endregion
                case SE.Inventory_Gear:
                    #region
                    ScenePreset.InventoryMenu(1, Program.gameData, screenController, keyController, ref SB_Next, ref SE_Next);
                    break;
                    #endregion
                case SE.Inventory_Skill:
                    #region
                    ScenePreset.InventoryMenu(2, Program.gameData, screenController, keyController, ref SB_Next, ref SE_Next);
                    break;
                    #endregion

                //장비 상점, 소모품 상점, 용병 거래소
                case SE.Shop_GearShop:
                    #region
                    ScenePreset.Gearshop(Program.gameData, screenController, keyController);
                    SB_Next = SB.Town;
                    SE_Next = SE.Town_Default;
                    break;
                #endregion
                case SE.Shop_PotionShop:
                    #region
                    //여기 소모품
                    SB_Next = SB.Town;
                    SE_Next = SE.Town_Default;
                    break;
                #endregion
                case SE.Shop_Mercenary:
                    #region
                    //여기 용병
                    SB_Next = SB.Town;
                    SE_Next = SE.Town_Default;
                    break;
                #endregion
                default:
                    return false; //존재하지 않는 씬
            }

            return true;
        }
    }
}
